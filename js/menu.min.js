'use strict';class Menu{constructor(e,t){this.numItems=0,this.initialItems=e,this.incrementLoad=t,this.curFilter="all"}setup(e,t){this.container=document.querySelector(".shuffle-wrapper"),this.allInputs=Array.from(document.querySelectorAll('input[name="shuffle-filter"]')),this.toggableFilters=document.querySelectorAll('.menu-filter:not([filter-level="1"])'),this.noItemsMsg=document.getElementById("no-items-msg"),this.loadMoreBtn=document.getElementById("load-more-btn"),this.setupShuffle(),this.setupListeners(),this.setupItems(e,t)}setupShuffle(){this.shuffle=new window.Shuffle(this.container,{itemSelector:".shuffle-item",buffer:1}),Array.from(document.getElementsByClassName("lozad")).forEach(e=>e.addEventListener("load",()=>this.shuffle.layout()))}setupListeners(){this.allInputs.forEach(e=>{e.addEventListener("click",e=>this.onInputClick(e))}),this.loadMoreBtn.addEventListener("click",e=>{this.onLoadMoreClicked(e)})}setupItems(e){this.items=Array.from(document.getElementById(e).children),this.items.forEach(e=>{this.shuffle.element.appendChild(e)}),this.shuffle.add(this.items),this.shuffle.filter(e=>!1)}getBar(e){return e.children[1]}barContains(e,t){return Array.from(e.children).some(e=>e.children[0].getAttribute("filter-value")===t)}resetFilter(t){function n(e){e.classList.remove("active"),e.classList.checked=!1}function s(e){e.classList.add("active"),e.classList.checked=!0}let e=this.getBar(t),o=Array.from(e.children).find(e=>e.classList.contains("active")),i=e.children[0];n(o),s(i)}hideFilter(t){const e=$(t);if(e.is(":hidden"))return;this.resetFilter(t),e.css("opacity",1),e.addClass("d-none"),e.animate({opacity:0},400)}showFilter(t){const e=$(t);if(!e.is(":hidden"))return;e.css("opacity",0),e.removeClass("d-none"),e.animate({opacity:1},400)}scrollTo(e){const t=$("html, body");t.animate({scrollTop:$(e).offset().top-90},500)}updateFilters(t,n,e){this.toggableFilters.forEach(s=>{const o=s.getAttribute("filter-parent");let i=this.getBar(s);const r=i===t,a=o===e,c=this.barContains(i,n);r||a||c?(this.showFilter(s),a&&this.scrollTo(s),o===e&&this.resetFilter(s)):this.hideFilter(s)})}updateItems(e){this.curFilter!==e&&(this.numItems=this.initialItems,this.curFilter=e);let t=0;this.shuffle.filter(n=>{const s=JSON.parse(n.getAttribute("data-groups"));return!(e!=="all"&&!s.some(t=>t===e)||!(t++,t<=this.numItems))}),this.shuffle.update(),t===0?this.noItemsMsg.classList.remove("d-none"):this.noItemsMsg.classList.add("d-none"),t<=this.numItems?this.loadMoreBtn.classList.add("d-none"):this.loadMoreBtn.classList.remove("d-none")}onInputClick(s){const e=s.currentTarget,t=e.getAttribute("filter-value"),n=e.parentNode.parentNode,o=n.parentNode.getAttribute("filter-parent");this.updateFilters(n,o,t),this.updateItems(t)}onLoadMoreClicked(){this.numItems+=this.incrementLoad,this.updateItems(this.curFilter)}}window.Menu=Menu